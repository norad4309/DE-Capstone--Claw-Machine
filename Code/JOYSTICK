/ Analog Joystick Test
// This program checks whether the joystick can control motion direction
// before integrating with the gantry system

#define ANALOG_X_PIN A2        // Joystick horizontal axis connected to A2
#define ANALOG_Y_PIN A3        // Joystick vertical axis connected to A3
#define ANALOG_BUTTON_PIN A4   // Pin used for the joystick’s push-button
// These pin assignments are flexible and may be updated after final hardware testing
	 
// Neutral values when the joystick is centered
#define ANALOG_X_CORRECTION 128
#define ANALOG_Y_CORRECTION 128
// Offsets are used so the joystick returns to a zero-centered position
	 
struct button { 
  byte pressed = 0;            // Holds the button state (1 = pressed, 0 = not pressed)
}; 
	 
struct analog { 
  short x, y;                  // Stores the processed X and Y axis values
  button button;               // Represents an external button input
                               // Additional buttons may be added later
}; 
	 
void setup() 
{ 
  pinMode(ANALOG_BUTTON_PIN, INPUT_PULLUP);   // Configures the button pin as an input
                                              // LOW indicates pressed, HIGH indicates released
  Serial.begin(115200);                       // Initializes serial communication for debugging
                                              // Baud rate may change depending on testing
} 
	 
void loop() 
{ 
  analog analog;  

  // Read joystick axes and adjust values so center position equals zero
  analog.x = readAnalogAxisLevel(ANALOG_X_PIN) - ANALOG_X_CORRECTION;
  analog.y = readAnalogAxisLevel(ANALOG_Y_PIN) - ANALOG_Y_CORRECTION;

  // Check whether the joystick button is currently pressed
  analog.button.pressed = isAnalogButtonPressed(ANALOG_BUTTON_PIN);

  // Output X-axis value to the serial monitor
  Serial.print("X:");
  Serial.println(analog.x);

  // Output Y-axis value to the serial monitor
  Serial.print("Y:");
  Serial.println(analog.y);

  // Determine and display the button state
  if (analog.button.pressed) {
    Serial.println("Button pressed");
  } else {
    Serial.println("Button not pressed");
  }

  delay(200);    // Adds a short pause to allow stable readings
} 

// Converts raw analog input into a usable 0–255 range
byte readAnalogAxisLevel(int pin) 
{ 
  return map(analogRead(pin), 0, 1023, 0, 255); 
} 

// Returns true if the joystick button is pressed
bool isAnalogButtonPressed(int pin) 
{ 
  return digitalRead(pin) == LOW;   // LOW = pressed, HIGH = not pressed
}


